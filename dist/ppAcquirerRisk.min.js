!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).PPAcquirerRisk=e()}(this,function(){"use strict";function s(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}var t=function(c){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=c.apply(t,a);function o(t){s(r,e,n,o,i,"next",t)}function i(t){s(r,e,n,o,i,"throw",t)}o(void 0)})}};var u=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var e=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function n(t){var e={exports:{}};return t(e,e.exports),e.exports}var o=n(function(t){var e=function(a){var s,t=Object.prototype,u=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function i(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o,i,a,c,e=e&&e.prototype instanceof g?e:g,e=Object.create(e.prototype),r=new C(r||[]);return e._invoke=(o=t,i=n,a=r,c=f,function(t,e){if(c===h)throw new Error("Generator is already running");if(c===p){if("throw"===t)throw e;return A()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){var r=function t(e,n){var r=e.iterator[n.method];if(r===s){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=s,t(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}r=l(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,v;var r=r.arg;if(!r)return n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v;{if(!r.done)return r;n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=s)}n.delegate=null;return v}(n,a);if(r){if(r===v)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===f)throw c=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=h;r=l(o,i,a);if("normal"===r.type){if(c=a.done?p:d,r.arg!==v)return{value:r.arg,done:a.done}}else"throw"===r.type&&(c=p,a.method="throw",a.arg=r.arg)}}),e}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=c;var f="suspendedStart",d="suspendedYield",h="executing",p="completed",v={};function g(){}function m(){}function y(){}var w={};w[r]=function(){return this};e=Object.getPrototypeOf,e=e&&e(e(T([])));e&&e!==t&&u.call(e,r)&&(w=e);var S=y.prototype=g.prototype=Object.create(w);function b(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this._invoke(e,t)})})}function x(a,c){var e;this._invoke=function(n,r){function t(){return new c(function(t,e){!function e(t,n,r,o){t=l(a[t],a,n);if("throw"!==t.type){var i=t.arg,n=i.value;return n&&"object"==typeof n&&u.call(n,"__await")?c.resolve(n.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):c.resolve(n).then(function(t){i.value=t,r(i)},function(t){return e("throw",t,r,o)})}o(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function T(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,t=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=s,t.done=!0,t};return t.next=t}}return{next:A}}function A(){return{value:s,done:!0}}return((m.prototype=S.constructor=y).constructor=m).displayName=i(y,o,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,i(t,o,"GeneratorFunction")),t.prototype=Object.create(S),t},a.awrap=function(t){return{__await:t}},b(x.prototype),x.prototype[n]=function(){return this},a.AsyncIterator=x,a.async=function(t,e,n,r,o){void 0===o&&(o=Promise);var i=new x(c(t,e,n,r),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},b(S),i(S,o,"Generator"),S[r]=function(){return this},S.toString=function(){return"[object Generator]"},a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=T,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=s)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return i.type="throw",i.arg=n,r.next=t,e&&(r.method="next",r.arg=s),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r,o=n.completion;return"throw"===o.type&&(r=o.arg,k(n)),r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=s),v}},a}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}),l=n(function(e){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(t){return typeof t}:e.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}e.exports=n});function f(t,e){console.error("Error: ".concat(t.toString(),"\n Info:").concat(e))}function a(t,e,n,r,o){"undefined"==typeof XMLHttpRequest&&console.warn("http request is not support");var i=new XMLHttpRequest;void 0!==i.timeout&&(i.timeout=12e4);var a="fetch"===e?"POST":e.toUpperCase();if(("GET"===a||"fetch"===e)&&"object"===l(n)&&n){var c,s=[];for(c in n)s.push(c+"="+encodeURIComponent(n[c]));t+="?"+s.join("&")}if(i.open(a,t,!0),void 0!==r)for(var u in r)!{}.hasOwnProperty.call(r,u)||i.setRequestHeader(u,r[u]);if("POST"===e.toUpperCase())try{i.send(JSON.stringify(n))}catch(t){throw new Error(t)}else i.send();i.onreadystatechange=function(){if(200===i.status&&4==i.readyState)try{var t=JSON.parse(i.responseText);o(t,i.status,i)}catch(t){throw new Error(t)}},i.onerror=function(t){throw new Error(t)}}function d(t){switch(t){case"dev":return{cybersourceUrl:"https://h.online-metrix.net/fp/tags.js?org_id=1snn5n9w&session_id=PingPongCheckout",forterUrl:"https://paycdn.pingpongx.com/production/static/forter/forter.min.js",initUrl:"https://dev-acquirer-payment.pingpongx.com/threeDSecure/s2s/init",localRiskUrl:"https://dev-acquirer-payment.pingpongx.com/v1/front/collect",riskIdUrl:"https://dev-acquirer-payment.pingpongx.com/v2/payment/getS2sCheckoutsInfo"};case"test":return{cybersourceUrl:"https://h.online-metrix.net/fp/tags.js?org_id=1snn5n9w&session_id=PingPongCheckout",forterUrl:"https://paycdn.pingpongx.com/production/static/forter/forter.min.js",initUrl:"https://test-acquirer-payment.pingpongx.com/threeDSecure/s2s/init",localRiskUrl:"https://test-acquirer-payment.pingpongx.com/v1/front/collect",riskIdUrl:"https://test-acquirer-payment.pingpongx.com/v2/payment/getS2sCheckoutsInfo"};case"prod":return{cybersourceUrl:"https://h.online-metrix.net/fp/tags.js?org_id=k8vif92e&session_id=PingPongCheckout",forterUrl:"https://paycdn.pingpongx.com/production/static/forter/forter.min.js",initUrl:"https://acquirer-payment.pingpongx.com/threeDSecure/s2s/init",localRiskUrl:"https://acquirer-payment.pingpongx.com/v1/front/collect",riskIdUrl:"https://acquirer-payment.pingpongx.com/v2/payment/getS2sCheckoutsInfo"};default:return{cybersourceUrl:"https://h.online-metrix.net/fp/tags.js?org_id=1snn5n9w&session_id=PingPongCheckout",forterUrl:"https://paycdn.pingpongx.com/production/static/forter/forter.min.js",initUrl:"https://dev-acquirer-payment.pingpongx.com/threeDSecure/s2s/init",localRiskUrl:"https://dev-acquirer-payment.pingpongx.com/v1/front/collect",riskIdUrl:"https://dev-acquirer-payment.pingpongx.com/v2/payment/getS2sCheckoutsInfo"}}}var h=function(){return(h=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function i(t,a,c,s){return new(c=c||Promise)(function(n,e){function r(t){try{i(s.next(t))}catch(t){e(t)}}function o(t){try{i(s.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof c?e:new c(function(t){t(e)})).then(r,o)}i((s=s.apply(t,a||[])).next())})}function p(n,r){var o,i,a,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,i=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(a=0<(a=c.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){c.label=e[1];break}if(6===e[0]&&c.label<a[1]){c.label=a[1],a=e;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(e);break}a[2]&&c.ops.pop(),c.trys.pop();continue}e=r.call(n,c)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function v(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]+e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]+e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]+e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]+e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function g(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]*e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]*e[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=t[3]*e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]*e[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[2]*e[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[3]*e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function m(t,e){return 32===(e%=64)?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:(e-=32,[t[1]<<e|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e])}function y(t,e){return 0===(e%=64)?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]}function w(t,e){return[t[0]^e[0],t[1]^e[1]]}function S(t){return t=w(t,[0,t[0]>>>1]),t=w(t=g(t,[4283543511,3981806797]),[0,t[0]>>>1]),t=w(t=g(t,[3301882366,444984403]),[0,t[0]>>>1])}function b(t,e){return!function(t,e){for(var n=0,r=t.length;n<r;++n)if(t[n]===e)return 1}(t,e)}function c(t){return parseInt(t)}function x(t){return parseFloat(t)}function I(t){return t.reduce(function(t,e){return t+(e?1:0)},0)}function k(){var t=window,e=navigator;return 4<=I(["MSCSSMatrix"in t,"msSetImmediate"in t,"msIndexedDB"in t,"msMaxTouchPoints"in e,"msPointerEnabled"in e])}function C(t,e,n){var r;(r=e)&&"function"==typeof r.setValueAtTime&&e.setValueAtTime(n,t.currentTime)}function T(t){var e=new Error(t);return e.name=t,e}var A=["monospace","sans-serif","serif"],E=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"],P={fontStyle:"normal",fontWeight:"normal",letterSpacing:"normal",lineBreak:"auto",lineHeight:"normal",textTransform:"none",textAlign:"left",textDecoration:"none",textShadow:"none",whiteSpace:"normal",wordBreak:"normal",wordSpacing:"normal",position:"absolute",left:"-9999px",fontSize:"48px"};var L={osCpu:function(){return navigator.oscpu},languages:function(){var t,e=navigator,n=[],r=e.language||e.userLanguage||e.browserLanguage||e.systemLanguage;return void 0!==r&&n.push([r]),Array.isArray(e.languages)?(t=window,5<=I(["webkitPersistentStorage"in(r=navigator),"webkitTemporaryStorage"in r,0===r.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in t,"BatteryManager"in t,"webkitMediaStream"in t,"webkitSpeechGrammar"in t])&&3<=I([!("MediaSettingsRange"in(t=window)),"RTCEncodedAudioFrame"in t,""+t.Intl=="[object Intl]",""+t.Reflect=="[object Reflect]"])||n.push(e.languages)):"string"!=typeof e.languages||(e=e.languages)&&n.push(e.split(",")),n},colorDepth:function(){return window.screen.colorDepth},deviceMemory:function(){return t=x(navigator.deviceMemory),e=void 0,"number"==typeof t&&isNaN(t)?e:t;var t,e},screenResolution:function(){var t=screen;return(t=[c(t.width),c(t.height)]).sort().reverse(),t},availableScreenResolution:function(){var t=screen;if(t.availWidth&&t.availHeight){t=[c(t.availWidth),c(t.availHeight)];return t.sort().reverse(),t}},hardwareConcurrency:function(){try{var t=c(navigator.hardwareConcurrency);return isNaN(t)?1:t}catch(t){return 1}},timezoneOffset:function(){var t=(new Date).getFullYear();return Math.max(x(new Date(t,0,1).getTimezoneOffset()),x(new Date(t,6,1).getTimezoneOffset()))},timezone:function(){var t=null===(t=window.Intl)||void 0===t?void 0:t.DateTimeFormat;if(t)return(new t).resolvedOptions().timeZone},sessionStorage:function(){try{return!!window.sessionStorage}catch(t){return!0}},localStorage:function(){try{return!!window.localStorage}catch(t){return!0}},indexedDB:function(){var t,e;if(!(k()||(t=window,e=navigator,3<=I(["msWriteProfilerMark"in t,"MSStream"in t,"msLaunchUri"in e,"msSaveBlob"in e])&&!k())))try{return!!window.indexedDB}catch(t){return!0}},openDatabase:function(){return!!window.openDatabase},cpuClass:function(){return navigator.cpuClass},platform:function(){return navigator.platform},plugins:function(){if(k())return[];if(navigator.plugins){for(var t=[],e=0;e<navigator.plugins.length;++e){var n=navigator.plugins[e];if(n){for(var r=[],o=0;o<n.length;++o){var i=n[o];r.push({type:i.type,suffixes:i.suffixes})}t.push({name:n.name,description:n.description,mimeTypes:r})}}return t}},canvas:function(){var t=((r=document.createElement("canvas")).width=240,r.height=140,r.style.display="inline",[r,r.getContext("2d")]),e=t[0],n=t[1];if(r=e,!n||!r.toDataURL)return{winding:!1,data:""};n.rect(0,0,10,10),n.rect(2,2,6,6),t=!n.isPointInPath(5,5,"evenodd"),n.textBaseline="alphabetic",n.fillStyle="#f60",n.fillRect(125,1,62,20),n.fillStyle="#069",n.font="11pt no-real-font-123";var r="Cwm fjordbank 😃 gly";return n.fillText(r,2,15),n.fillStyle="rgba(102, 204, 0, 0.2)",n.font="18pt Arial",n.fillText(r,4,45),n.globalCompositeOperation="multiply",n.fillStyle="rgb(255,0,255)",n.beginPath(),n.arc(50,50,50,0,2*Math.PI,!0),n.closePath(),n.fill(),n.fillStyle="rgb(0,255,255)",n.beginPath(),n.arc(100,50,50,0,2*Math.PI,!0),n.closePath(),n.fill(),n.fillStyle="rgb(255,255,0)",n.beginPath(),n.arc(75,100,50,0,2*Math.PI,!0),n.closePath(),n.fill(),n.fillStyle="rgb(255,0,255)",n.arc(75,75,75,0,2*Math.PI,!0),n.arc(75,75,25,0,2*Math.PI,!0),n.fill("evenodd"),{winding:t,data:e.toDataURL()}},touchSupport:function(){var e,t=navigator,n=0;void 0!==t.maxTouchPoints?n=c(t.maxTouchPoints):void 0!==t.msMaxTouchPoints&&(n=t.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch(t){e=!1}return{maxTouchPoints:n,touchEvent:e,touchStart:"ontouchstart"in window}},fonts:function(){function o(){var t=i.createElement("span");t.textContent="mmMwWLliI0O&1";for(var e=0,n=Object.keys(P);e<n.length;e++){var r=n[e];t.style[r]=P[r]}return t}var i=document,t=i.body,n=i.createElement("div"),a=i.createElement("div"),r={},c={},e=A.map(function(t){var e=o();return e.style.fontFamily=t,n.appendChild(e),e});t.appendChild(n);for(var s=0,u=A.length;s<u;s++)r[A[s]]=e[s].offsetWidth,c[A[s]]=e[s].offsetHeight;var l=function(){for(var t={},e=function(r){t[r]=A.map(function(t){var e,n,t=(e=r,n=t,(t=o()).style.fontFamily="'"+e+"',"+n,t);return a.appendChild(t),t})},n=0,r=E;n<r.length;n++)e(r[n]);return t}();t.appendChild(a);for(var f=[],d=0,h=E.length;d<h;d++)!function(n){return A.some(function(t,e){return n[e].offsetWidth!==r[t]||n[e].offsetHeight!==c[t]})}(l[E[d]])||f.push(E[d]);return t.removeChild(a),t.removeChild(n),f},audio:function(){return i(this,void 0,void 0,function(){var e,n,r,i;return p(this,function(t){switch(t.label){case 0:if(e=window,!(n=e.OfflineAudioContext||e.webkitOfflineAudioContext))return[2,-2];if(function(){var t=window,e=navigator;return 4<=I(["ApplePayError"in t,"CSSPrimitiveValue"in t,"Counter"in t,0===e.vendor.indexOf("Apple"),"getStorageUpdates"in e,"WebKitMediaKeys"in t])}()&&!function(){var t=window;return 3<=I(["safari"in t,!("DeviceMotionEvent"in t),!("ongestureend"in t),!("standalone"in navigator)])}()&&!function(){var t=window;return 3<=I(["DOMRectList"in t,"RTCPeerConnectionIceEvent"in t,"SVGGeometryElement"in t,"ontransitioncancel"in t])}())return[2,-1];i=new n(1,44100,44100),(e=i.createOscillator()).type="triangle",C(i,e.frequency,1e4),n=i.createDynamicsCompressor(),C(i,n.threshold,-50),C(i,n.knee,40),C(i,n.ratio,12),C(i,n.reduction,-20),C(i,n.attack,0),C(i,n.release,.25),e.connect(n),n.connect(i.destination),e.start(0),t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,(o=i,new Promise(function(e,t){o.oncomplete=function(t){return e(t.renderedBuffer)};var n=3,r=function(){switch(o.startRendering(),o.state){case"running":setTimeout(function(){return t(T("timeout"))},1e3);break;case"suspended":document.hidden||n--,0<n?setTimeout(r,500):t(T("suspended"))}};r()}))];case 2:return r=t.sent(),[3,5];case 3:if("timeout"===(i=t.sent()).name||"suspended"===i.name)return[2,-3];throw i;case 4:return e.disconnect(),n.disconnect(),[7];case 5:return[2,function(t){for(var e=0,n=4500;n<5e3;++n)e+=Math.abs(t[n]);return e}(r.getChannelData(0))]}var o})})},pluginsSupport:function(){return void 0!==navigator.plugins},productSub:function(){return navigator.productSub},emptyEvalLength:function(){return eval.toString().length},errorFF:function(){try{throw"a"}catch(t){try{return t.toSource(),!0}catch(t){return!1}}},vendor:function(){return navigator.vendor},chrome:function(){return void 0!==window.chrome},cookiesEnabled:function(){var t=document;try{t.cookie="cookietest=1; SameSite=Strict;";var e=-1!==t.cookie.indexOf("cookietest=");return t.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch(t){return!1}}};function D(){return function(u,l,f){return i(this,void 0,void 0,function(){var e,n,r,o,i,a,c,s;return p(this,function(t){switch(t.label){case 0:e=Date.now(),n={},r=0,o=Object.keys(u),t.label=1;case 1:if(!(r<o.length))return[3,7];if(i=o[r],!b(f,i))return[3,6];a=void 0,t.label=2;case 2:return t.trys.push([2,4,,5]),s={},[4,u[i](l)];case 3:return s.value=t.sent(),a=s,[3,5];case 4:return c=t.sent(),a=c&&"object"==typeof c&&"message"in c?{error:c}:{error:{message:c}},[3,5];case 5:c=Date.now(),n[i]=h(h({},a),{duration:c-e}),e=c,t.label=6;case 6:return r++,[3,1];case 7:return[2,n]}})})}(L,void 0,[])}function O(t){return JSON.stringify(t,function(t,e){return e instanceof Error?h({name:(n=e).name,message:n.message,stack:null===(r=n.stack)||void 0===r?void 0:r.split("\n")},n):e;var n,r},2)}function U(t){return function(t,e){e=e||0;for(var n=(t=t||"").length%16,r=t.length-n,o=[0,e],i=[0,e],a=[0,0],c=[0,0],s=[2277735313,289559509],u=[1291169091,658871167],l=0;l<r;l+=16)a=[255&t.charCodeAt(l+4)|(255&t.charCodeAt(l+5))<<8|(255&t.charCodeAt(l+6))<<16|(255&t.charCodeAt(l+7))<<24,255&t.charCodeAt(l)|(255&t.charCodeAt(l+1))<<8|(255&t.charCodeAt(l+2))<<16|(255&t.charCodeAt(l+3))<<24],c=[255&t.charCodeAt(l+12)|(255&t.charCodeAt(l+13))<<8|(255&t.charCodeAt(l+14))<<16|(255&t.charCodeAt(l+15))<<24,255&t.charCodeAt(l+8)|(255&t.charCodeAt(l+9))<<8|(255&t.charCodeAt(l+10))<<16|(255&t.charCodeAt(l+11))<<24],a=m(a=g(a,s),31),o=v(o=m(o=w(o,a=g(a,u)),27),i),o=v(g(o,[0,5]),[0,1390208809]),c=m(c=g(c,u),33),i=v(i=m(i=w(i,c=g(c,s)),31),o),i=v(g(i,[0,5]),[0,944331445]);switch(a=[0,0],c=[0,0],n){case 15:c=w(c,y([0,t.charCodeAt(l+14)],48));case 14:c=w(c,y([0,t.charCodeAt(l+13)],40));case 13:c=w(c,y([0,t.charCodeAt(l+12)],32));case 12:c=w(c,y([0,t.charCodeAt(l+11)],24));case 11:c=w(c,y([0,t.charCodeAt(l+10)],16));case 10:c=w(c,y([0,t.charCodeAt(l+9)],8));case 9:c=g(c=w(c,[0,t.charCodeAt(l+8)]),u),i=w(i,c=g(c=m(c,33),s));case 8:a=w(a,y([0,t.charCodeAt(l+7)],56));case 7:a=w(a,y([0,t.charCodeAt(l+6)],48));case 6:a=w(a,y([0,t.charCodeAt(l+5)],40));case 5:a=w(a,y([0,t.charCodeAt(l+4)],32));case 4:a=w(a,y([0,t.charCodeAt(l+3)],24));case 3:a=w(a,y([0,t.charCodeAt(l+2)],16));case 2:a=w(a,y([0,t.charCodeAt(l+1)],8));case 1:a=g(a=w(a,[0,t.charCodeAt(l)]),s),o=w(o,a=g(a=m(a,31),u))}return o=v(o=w(o,[0,t.length]),i=w(i,[0,t.length])),i=v(i,o),o=v(o=S(o),i=S(i)),i=v(i,o),("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)}(function(t){for(var e="",n=0,r=Object.keys(t);n<r.length;n++){var o=r[n],i=t[o],i=i.error?"error":JSON.stringify(i.value);e+=(e?"|":"")+o.replace(/([:|\\])/g,"\\$1")+":"+i}return e}(t))}var M=(R.prototype.get=function(o){return void 0===o&&(o={}),i(this,void 0,void 0,function(){var n,r;return p(this,function(t){switch(t.label){case 0:return[4,D()];case 1:return n=t.sent(),r={components:n,get visitorId(){return e=void 0===e?U(this.components):e},set visitorId(t){e=t}},o.debug&&console.log("Copy the text below to get the debug data:\n\n```\nversion: 3.0.6\nuserAgent: "+navigator.userAgent+"\ngetOptions: "+JSON.stringify(o,void 0,2)+"\nvisitorId: "+r.visitorId+"\ncomponents: "+O(n)+"\n```"),[2,r]}var e})})},R);function R(){}var j={load:function(t){var e=void 0===(t=(void 0===t?{}:t).delayFallback)?50:t;return i(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,(void 0===(r=2*(n=e))&&(r=1/0),new Promise(function(t){var e=window.requestIdleCallback;e?e(function(){return t()},{timeout:r}):setTimeout(t,Math.min(n,r))}))];case 1:return t.sent(),[2,new M]}var n,r})})},hashComponents:U,componentsToDebugString:O};return function(){function c(t){u(this,c);var e=t.env,n=void 0===e?"test":e,r=t.accId,o=void 0===r?null:r,i=t.elId,a=void 0===i?null:i,e=t.merchantUserId,r=void 0===e?null:e,i=t.clientId,e=void 0===i?null:i,i=t.merchantTransactionId,i=void 0===i?null:i;console.log("初始化参数：",t),this.env=n,this.accId=o,this.merchantUserId=r,this.elId=a,this.clientId=e,this.merchantTransactionId=i,this.fingerPrint=null,this.sessionId=null,this.forterSiteId=null,this.threeDSServerTransID=null,this.forterTokenCookie=null,this.extractParams=null}return e(c,[{key:"install",value:function(){var t=d(this.env),e=this;a(t.riskIdUrl,"POST",{accId:e.accId,merchantTransactionId:e.merchantTransactionId,clientId:e.clientId},{"Content-Type":"application/json"},function(t){e.sessionId=t.data.cyberSessionId||null,e.forterSiteId=t.data.forterSiteId||null,e.loadRiskJs()}),e.loadLocalRisk()}},{key:"version",value:function(){console.log("当前版本:","1.0.5")}},{key:"forterInit",value:function(t){var e,n,r,o=this;t.addEventListener("keyup",(e=function(t){t.target.value.toString().length<15||a(d(o.env).initUrl,"fetch",{accId:o.accId,cardNumber:t.target.value.replace(/\s+/g,"")},{"Content-Type":"application/x-www-form-urlencoded"},function(t){o.threeDSServerTransID=t.data.threeDSServerTransID,window&&window.ftr__&&t.data&&window.ftr__.init3DS(t.data,function(){})})},n=500,function(t){clearTimeout(r),r=setTimeout(function(){e(t)},n)}),!0)}},{key:"tokenPaymentInit",value:function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(t){console.log("3D init 成功，返回参数为：",t)},r=this,o=t.cardToken,i=void 0===o?null:o;this.forterSiteId&&(o={accId:e=this.accId,merchantUserId:t=this.merchantUserId,cardToken:i},t?i?e?(console.log("token支付参数params：",o),a(d(r.env).initUrl,"fetch",o,{"Content-Type":"application/x-www-form-urlencoded"},function(t){r.threeDSServerTransID=t.data.threeDSServerTransID,window&&window.ftr__&&t.data&&window.ftr__.init3DS(t.data,function(){}),n(t)})):f(new Error("accId must not be empty"),"accId参数不能为空"):f(new Error("cardToken must not be empty"),"cardToken参数不能为空"):f(new Error("merchantUserId must not be empty"),"merchantUserId参数不能为空"))}},{key:"get3DParams",value:function(){var t={fingerprintId:this.fingerPrint,orderTerminal:"03"};return this.forterSiteId&&""!==this.forterSiteId&&(t=Object.assign({},t,{threeDSServerTransID:this.threeDSServerTransID,forterTokenCookie:this.forterTokenCookie,forterSiteId:this.forterSiteId})),console.log("3D payment params:",t),JSON.stringify(t)}},{key:"payment3DValidate",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){console.log("payment3DValidate函数执行结果回调")};console.log("3D跳转入参:",t);var n,r=t.acsUrl,o=t.threeDChannel,i=t.termUrl,a=t.threeDResult,c=t.threeDContinue,s=t.threeDHighLevelParams,u=t.requestMethod;if("true"===c){if(console.log("走3d"),o&&"forter"===o.toLowerCase()){if(window&&window.ftr__){var l,f=document.querySelectorAll(".challenge-container");return console.log("---"),console.log(f),console.log("---"),0<f.length?(l=f[0]).style.display="block":(t=window.innerHeight,c=window.innerWidth,o="challenge-container",(f=document.createElement("div")).id=o,document.body.appendChild(f),(l=f).style.display="block",l.style.position="absolute",l.style.height=t+"px",l.style.width=c+"px",l.style.left="0%",l.style.top="0%",l.style.backgroundColor="#fff",document.appendChild(l)),window.ftr__.triggerChallengeIfNeeded(a,l,function(t,e,n,r){console.log("forter方法回调：",t,e,n,r),t?(l.style.display="none",console.log(t)):e&&(window.location.href="".concat(i,"?cres=").concat(decodeURIComponent(r),"&transStatus=").concat(n))}),!1}return!1}return s&&(n={},Object.keys(s).map(function(t){n[t]=s[t]}),this.form3Dv2Submit(r,u,n)),!1}e()}},{key:"loadRiskJs",value:function(){var t,e,n,r,o,i=this,a=d(this.env);i.sessionId&&(t="".concat(a.cybersourceUrl).concat(i.sessionId,"_").concat(i.merchantTransactionId),e=document.head||document.getElementsByTagName("head")[0],(n=document.createElement("script")).setAttribute("type","text/javascript"),n.setAttribute("src",t),e.appendChild(n)),i.forterSiteId&&""!==i.forterSiteId&&(window.siteId=i.forterSiteId,n=a.forterUrl,a=i.forterSiteId,r=function(){var t,t=null!=(t=new RegExp("forterToken=([^;]+)").exec(document.cookie))?unescape(t[1]):null;console.log("forterTokenCookie:",t),i.forterTokenCookie=t,i.elId&&(0<(t=window.document.querySelectorAll(i.elId)).length?i.elId&&i.forterInit.call(i,t[0]):f(new Error("can not find dom id:".concat(i.elId,", please check again")),"无法找到对应dom id，请检查后再试"))},(o=document.createElement("script")).async=!0,o.id=a,o.type="text/javascript",o.readyState?o.onreadystatechange=function(){"loaded"!=o.readyState&&"complete"!=o.readyState||(o.onreadystatechange=null,r())}:o.onload=function(){r()},o.src=n,document.getElementsByTagName("head")[0].appendChild(o))}},{key:"loadLocalRisk",value:function(){var n=this;t(o.mark(function t(){var e;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.load();case 2:return e=t.sent,t.next=5,e.get();case 5:e=t.sent,e=e.visitorId,n.fingerPrint=e;case 8:case"end":return t.stop()}},t)}))()}},{key:"form3Dv2Submit",value:function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:document.body;if("GET"!==e.toUpperCase()){var o=document.createElement("form");o.style.display="none",o.setAttribute("method",e),r.appendChild(o);var i,a="";for(i in n)a=a.concat('<input type="hidden" name="'+i+'" value="'+n[i]+'"/>');o.innerHTML=a,o.setAttribute("action",t),o.submit()}else window.location.href=t}}]),c}()});
