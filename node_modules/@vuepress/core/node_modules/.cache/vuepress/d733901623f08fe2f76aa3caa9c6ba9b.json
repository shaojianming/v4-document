{"remainingRequest":"/Users/shaojm/work/www/v4-document/node_modules/babel-loader/lib/index.js??ref--3-1!/Users/shaojm/work/www/v4-document/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/shaojm/work/www/v4-document/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shaojm/work/www/v4-document/docs/.vuepress/components/Tools/Sign.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/shaojm/work/www/v4-document/docs/.vuepress/components/Tools/Sign.vue","mtime":1698922442954},{"path":"/Users/shaojm/work/www/v4-document/node_modules/cache-loader/dist/cjs.js","mtime":1698386204375},{"path":"/Users/shaojm/work/www/v4-document/node_modules/babel-loader/lib/index.js","mtime":1698386204160},{"path":"/Users/shaojm/work/www/v4-document/node_modules/cache-loader/dist/cjs.js","mtime":1698386204375},{"path":"/Users/shaojm/work/www/v4-document/node_modules/vue-loader/lib/index.js","mtime":1698386206165}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwtc2VhcmNoLXBhcmFtcy5kZWxldGUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuaGFzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLnNpemUuanMiOwppbXBvcnQgc2lnblV0aWwgZnJvbSAiL3V0aWxzL3NpZ25VdGlsIjsKaW1wb3J0IHNoYTI1NiBmcm9tICJjcnlwdG8tanMvc2hhMjU2IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJzaWduIiwKICBtb3VudGVkKCkgewogICAgaW1wb3J0KCd2dWUtanNvbi1lZGl0b3InKS50aGVuKG1vZHVsZSA9PiB7CiAgICAgIC8vIHVzZSBjb2RlCiAgICAgIHRoaXMuZHluYW1pY0NvbXBvbmVudCA9IG1vZHVsZS5kZWZhdWx0OwogICAgfSk7CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZHluYW1pY0NvbXBvbmVudDogbnVsbCwKICAgICAgc2lnbkNvbnRlbnQ6ICIiLAogICAgICBzaWduOiAiIiwKICAgICAgaW5wdXREYXRhOiB7CiAgICAgICAgYWNjSWQ6ICIyMDE4MDkyNzE0MzEzMDEwMDE2MjkxIiwKICAgICAgICBzYWx0OiAiRjc4QkM5NkE1NTU0OEIyMzE5RUU2OEUwIiwKICAgICAgICBqc29uRGF0YTogIiIsCiAgICAgICAgc2NvcGU6IFsicmVxdWVzdElkIiwgImFjY0lkIiwgImNsaWVudElkIiwgIm1lcmNoYW50VHJhbnNhY3Rpb25JZCIsICJ0cmFuc2FjdGlvbklkIiwgImFtb3VudCIsICJjYXJkTnVtIiwgImN1cnJlbmN5IiwgInNpZ25UeXBlIl0KICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHRyaWdnZXJTaWduKCkgewogICAgICBpZiAodGhpcy5pbnB1dERhdGEuanNvbkRhdGEgPT09IHVuZGVmaW5lZCB8fCB0aGlzLmlucHV0RGF0YS5qc29uRGF0YSA9PT0gIiIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLor7fovpPlhaXnrb7lkI3lj4LmlbAiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuaW5wdXREYXRhLmpzb25EYXRhICE9PSB1bmRlZmluZWQgJiYgdGhpcy5pbnB1dERhdGEuanNvbkRhdGEuYWNjSWQgIT09ICIiICYmIHRoaXMuaW5wdXREYXRhLmpzb25EYXRhLmFjY0lkICE9PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLmlucHV0RGF0YS5hY2NJZCA9IHRoaXMuaW5wdXREYXRhLmpzb25EYXRhLmFjY0lkOwogICAgICB9CiAgICAgIHRoaXMuc2lnbkNvbnRlbnQgPSB0aGlzLmdldFNpZ25Db250ZW50KHRoaXMuaW5wdXREYXRhLmpzb25EYXRhKTsKICAgICAgdGhpcy5zaWduID0gdGhpcy5nZXRTaWduKHRoaXMuc2lnbkNvbnRlbnQpOwogICAgfSwKICAgIGdldFNpZ24oc2lnbkNvbnRlbnQpIHsKICAgICAgbGV0IHNpZ24gPSBzaGEyNTYoc2lnbkNvbnRlbnQpOwogICAgICAvLyBzaWduID0gYmFzZTY0LnN0cmluZ2lmeShzaWduKTsKICAgICAgc2lnbiA9IHNpZ24udG9TdHJpbmcoKTsKICAgICAgc2lnbiA9IHNpZ24udG9VcHBlckNhc2UoKTsKICAgICAgY29uc29sZS5sb2coInNpZ246Iiwgc2lnbik7CiAgICAgIHJldHVybiBzaWduOwogICAgfSwKICAgIGdldFNpZ25Db250ZW50KHJlcXVlc3REYXRhKSB7CiAgICAgIGxldCBzaWduU2NvcGUgPSB0aGlzLmlucHV0RGF0YS5zY29wZTsKICAgICAgbGV0IG5lZWRTaWduS2V5TWFwID0gW107CiAgICAgIGxldCBuZWVkU2lnbk1hcCA9IFtdOwogICAgICBmb3IgKGxldCByZXF1ZXN0RGF0YUtleSBpbiByZXF1ZXN0RGF0YSkgewogICAgICAgIGlmIChzaWduU2NvcGUuaW5jbHVkZXMocmVxdWVzdERhdGFLZXkpKSB7CiAgICAgICAgICBuZWVkU2lnbktleU1hcC5wdXNoKHJlcXVlc3REYXRhS2V5KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgbmVlZFNpZ25LZXlNYXAgPSBuZWVkU2lnbktleU1hcC5zb3J0KCk7CiAgICAgIG5lZWRTaWduS2V5TWFwLmZvckVhY2goa2V5ID0+IHsKICAgICAgICBuZWVkU2lnbk1hcFtrZXldID0gcmVxdWVzdERhdGFba2V5XTsKICAgICAgfSk7CiAgICAgIGNvbnNvbGUubG9nKCJjdXJyZW50IHJlcXVlc3QgZGF0YToiLCByZXF1ZXN0RGF0YSk7CiAgICAgIGNvbnNvbGUubG9nKCJLZXkgdmFsdWUgcGFpcnMgd2l0aGluIHRoZSBzaWduYXR1cmUgcmFuZ2XvvJoiLCBuZWVkU2lnbk1hcCk7CiAgICAgIGxldCBPU2lnbkNvbnRlbnQgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7CiAgICAgIG5lZWRTaWduS2V5TWFwLmZvckVhY2goZnVuY3Rpb24gKGtleSwgaWR4LCBhcnJheSkgewogICAgICAgIE9TaWduQ29udGVudC5hcHBlbmQoa2V5LCBuZWVkU2lnbk1hcFtrZXldKTsKICAgICAgfSk7CiAgICAgIGxldCBzaWduQ29udGVudCA9IE9TaWduQ29udGVudC50b1N0cmluZygpOwogICAgICBzaWduQ29udGVudCA9IHRoaXMuaW5wdXREYXRhLnNhbHQgKyBzaWduQ29udGVudDsKICAgICAgY29uc29sZS5sb2coInNpZ25Db250ZW50OiIsIHNpZ25Db250ZW50KTsKICAgICAgcmV0dXJuIHNpZ25Db250ZW50OwogICAgfQogIH0KfTs="},{"version":3,"names":["signUtil","sha256","name","mounted","then","module","dynamicComponent","default","data","signContent","sign","inputData","accId","salt","jsonData","scope","methods","triggerSign","undefined","$message","error","getSignContent","getSign","toString","toUpperCase","console","log","requestData","signScope","needSignKeyMap","needSignMap","requestDataKey","includes","push","sort","forEach","key","OSignContent","URLSearchParams","idx","array","append"],"sources":["/Users/shaojm/work/www/v4-document/docs/.vuepress/components/Tools/Sign.vue"],"sourcesContent":["\nimport signUtil from \"/utils/signUtil\";\nimport sha256 from \"crypto-js/sha256\";\n\nexport default {\n  name: \"sign\",\n  mounted() {\n    import('vue-json-editor').then(module => {\n      // use code\n      this.dynamicComponent = module.default\n    })\n  },\n  data(){\n    return {\n      dynamicComponent: null,\n      signContent: \"\",\n      sign: \"\",\n      inputData:{\n        accId:\"2018092714313010016291\",\n        salt:\"F78BC96A55548B2319EE68E0\",\n        jsonData:\"\",\n        scope:[\"requestId\", \"accId\", \"clientId\", \"merchantTransactionId\", \"transactionId\", \"amount\", \"cardNum\", \"currency\", \"signType\"],\n      }\n    }\n  },\n  methods:{\n    triggerSign(){\n     if (this.inputData.jsonData===undefined||this.inputData.jsonData===\"\"){\n       this.$message.error(\"请输入签名参数\");\n       return;\n     }\n\n      if (this.inputData.jsonData!==undefined&&this.inputData.jsonData.accId!==\"\"&&this.inputData.jsonData.accId!==undefined){\n        this.inputData.accId = this.inputData.jsonData.accId\n      }\n\n      this.signContent =  this.getSignContent(this.inputData.jsonData);\n      this.sign = this.getSign(this.signContent);\n\n    },\n    getSign(signContent){\n      let sign = sha256(signContent);\n      // sign = base64.stringify(sign);\n      sign = sign.toString();\n      sign = sign.toUpperCase();\n      console.log(\"sign:\", sign)\n      return sign;\n    },\n    getSignContent(requestData){\n      let signScope = this.inputData.scope\n      let needSignKeyMap = [];\n      let needSignMap = [];\n      for (let requestDataKey in requestData) {\n        if (signScope.includes(requestDataKey)) {\n          needSignKeyMap.push(requestDataKey);\n        }\n      }\n      needSignKeyMap = needSignKeyMap.sort();\n      needSignKeyMap.forEach((key) => {\n        needSignMap[key] = requestData[key];\n      })\n\n      console.log(\"current request data:\", requestData)\n      console.log(\"Key value pairs within the signature range：\", needSignMap);\n      let OSignContent = new URLSearchParams();\n      needSignKeyMap.forEach(function (key, idx, array) {\n        OSignContent.append(key, needSignMap[key]);\n      });\n      let signContent = OSignContent.toString()\n      signContent = this.inputData.salt + signContent;\n      console.log(\"signContent:\", signContent)\n\n      return signContent;\n    }\n  }\n}\n"],"mappings":"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"}]}