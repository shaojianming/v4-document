{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{338:function(e,l,a){const t=a(372).create({timeout:1e5});t.interceptors.request.use(e=>e,e=>Promise.reject(e)),t.interceptors.response.use(e=>{const l=e.data,{code:a,total:t,data:n}=l;l.msg||l.message||l.description;return console.log(l),l},e=>Promise.reject(e)),e.exports=t},346:function(e,l,a){a(36),a(361),a(362),a(363);const t=a(398),n=a(338),o={sign:(e,l)=>{let a=[\"requestId\",\"accId\",\"clientId\",\"merchantTransactionId\",\"transactionId\",\"amount\",\"cardNum\",\"currency\",\"signType\"],n=[],o=[];for(let l in e)a.includes(l)&&n.push(l);n=n.sort(),n.forEach(l=>{o[l]=e[l]}),console.log(\"current request data:\",e),console.log(\"Key value pairs within the signature range：\",o);let r=new URLSearchParams;n.forEach((function(e,l,a){r.append(e,o[e])}));let s=r.toString();s=l+s,console.log(\"signContent:\",s);let u=t(s);return u=u.toString(),u=u.toUpperCase(),console.log(\"sign:\",u),e.sign=u,u},signV4WithRequest:(e,l,a,t,o,r)=>{n.post(e+\"/api/v4/dealSignRequest\",{salt:t,paymentUrl:l,requestBody:a}).then(e=>{200===e.code?o(e.result):r(e)})},deepCopy:e=>JSON.parse(JSON.stringify(e))};e.exports=o},399:function(e,l){},485:function(e,l,a){},486:function(e,l,a){},603:function(e,l,a){\"use strict\";a(485)},604:function(e,l,a){\"use strict\";a(486)},713:function(e,l,a){\"use strict\";a.r(l);var t=a(346),n=a.n(t),o={name:\"redirect.vue\",created(){this.refreshOrder()},components:{JsonEditor:a(434).default},mounted(){a.e(4).then(a.t.bind(null,647,7)).then(e=>{this.dynamicComponent=e.default})},computed:{},data:()=>({requestBody:\"\",responseBody:\"\",apiHost:\"https://acquirer-docs-api.pingpongx.com\",env:\"https://sandbox-acquirer-payment.pingpongx.com\",centerDialogVisible:!1,dynamicComponent:null,drawer:!1,activeName:\"first\",salt:\"F78BC96A55548B2319EE68E0\",token:\"\",dialogWith:\"30%\",responseData:\"\",isDisabled:!0,isLoading:!1,htmlContent:\"\",requestDataFormat:\"\",requestData:{accId:\"2018092714313010016291\",clientId:\"2018092714313010016\",version:\"1.0\",bizContent:{captureDelayHours:0,language:\"en\",amount:\"\",billingAddress:{city:\"Birmingham\",country:\"US\",firstName:\"James\",lastName:\"LeBron\",phone:\"18301770495\",postcode:\"35222\",state:\"AL\",street:\"1986 Broad Street\"},currency:\"USD\",customer:{customerId:\"20191201001\",email:\"\",firstName:\"James\",identificationId:\"\",identificationType:\"ID\",lastName:\"LeBron\",phone:\"18301770495\"},goods:[{description:\"short legs\",imgUrl:\"http://pic.bizhi360.com/bpic/30/5230.jpg\",name:\"corgi\",number:\"1\",sku:\"20230524001\",unitPrice:\"11.3\",virtualProduct:\"N\"},{description:\"stupid nerd\",imgUrl:\"http://d.paper.i4.cn/max/2016/12/08/11/1481166973148_375716.jpg\",name:\"husky\",number:\"1\",sku:\"20230524002\",unitPrice:\"22.5\",virtualProduct:\"N\"}],merchantTransactionId:\"\",merchantUserId:\"12604896051315\",notificationUrl:\"https://test-acquirer-payment.pingpongx.com/qa/notify\",payCancelUrl:\"https://www.example.com\",payResultUrl:\"https://test-acquirerpay.pingpongx.com/qa/result.html\",shippingAddress:{city:\"Miami\",country:\"US\",firstName:\"Jamesbb\",lastName:\"LeBronbb\",phone:\"3055787342\",postcode:\"33131\",state:\"FL\",street:\"701 Brickell Avenue, Suite 2700\"}},sign:\"\",signType:\"SHA256\"},environments:[{label:\"sandbox\",value:\"https://sandbox-acquirer-payment.pingpongx.com\"},{label:\"production\",value:\"https://acquirer-payment.pingpongx.com\"},{label:\"test\",value:\"https://test-acquirer-payment.pingpongx.com\"}],currencies:[{label:\"AFN\",value:\"AFN\"},{label:\"DZD\",value:\"DZD\"},{label:\"ARS\",value:\"ARS\"},{label:\"AMD\",value:\"AMD\"},{label:\"AWG\",value:\"AWG\"},{label:\"AUD\",value:\"AUD\"},{label:\"BSD\",value:\"BSD\"},{label:\"BHD\",value:\"BHD\"},{label:\"THB\",value:\"THB\"},{label:\"PAB\",value:\"PAB\"},{label:\"BBD\",value:\"BBD\"},{label:\"BYN\",value:\"BYN\"},{label:\"BZD\",value:\"BZD\"},{label:\"BMD\",value:\"BMD\"},{label:\"VEF\",value:\"VEF\"},{label:\"BOB\",value:\"BOB\"},{label:\"BRL\",value:\"BRL\"},{label:\"BND\",value:\"BND\"},{label:\"BGN\",value:\"BGN\"},{label:\"BIF\",value:\"BIF\"},{label:\"CVE\",value:\"CVE\"},{label:\"CAD\",value:\"CAD\"},{label:\"KYD\",value:\"KYD\"},{label:\"XOF\",value:\"XOF\"},{label:\"XAF\",value:\"XAF\"},{label:\"XPF\",value:\"XPF\"},{label:\"CLP\",value:\"CLP\"},{label:\"COP\",value:\"COP\"},{label:\"KMF\",value:\"KMF\"},{label:\"CDF\",value:\"CDF\"},{label:\"BAM\",value:\"BAM\"},{label:\"NIO\",value:\"NIO\"},{label:\"CRC\",value:\"CRC\"},{label:\"CUP\",value:\"CUP\"},{label:\"CZK\",value:\"CZK\"},{label:\"GMD\",value:\"GMD\"},{label:\"DKK\",value:\"DKK\"},{label:\"MKD\",value:\"MKD\"},{label:\"DJF\",value:\"DJF\"},{label:\"STD\",value:\"STD\"},{label:\"DOP\",value:\"DOP\"},{label:\"VND\",value:\"VND\"},{label:\"XCD\",value:\"XCD\"},{label:\"EGP\",value:\"EGP\"},{label:\"SVC\",value:\"SVC\"},{label:\"ETB\",value:\"ETB\"},{label:\"EUR\",value:\"EUR\"},{label:\"FKP\",value:\"FKP\"},{label:\"FJD\",value:\"FJD\"},{label:\"HUF\",value:\"HUF\"},{label:\"GHS\",value:\"GHS\"},{label:\"GIP\",value:\"GIP\"},{label:\"HTG\",value:\"HTG\"},{label:\"PYG\",value:\"PYG\"},{label:\"GNF\",value:\"GNF\"},{label:\"GYD\",value:\"GYD\"},{label:\"HKD\",value:\"HKD\"},{label:\"UAH\",value:\"UAH\"},{label:\"ISK\",value:\"ISK\"},{label:\"INR\",value:\"INR\"},{label:\"IRR\",value:\"IRR\"},{label:\"IQD\",value:\"IQD\"},{label:\"JMD\",value:\"JMD\"},{label:\"JOD\",value:\"JOD\"},{label:\"KES\",value:\"KES\"},{label:\"PGK\",value:\"PGK\"},{label:\"LAK\",value:\"LAK\"},{label:\"HRK\",value:\"HRK\"},{label:\"KWD\",value:\"KWD\"},{label:\"AOA\",value:\"AOA\"},{label:\"MMK\",value:\"MMK\"},{label:\"GEL\",value:\"GEL\"},{label:\"LBP\",value:\"LBP\"},{label:\"ALL\",value:\"ALL\"},{label:\"HNL\",value:\"HNL\"},{label:\"SLL\",value:\"SLL\"},{label:\"LRD\",value:\"LRD\"},{label:\"LYD\",value:\"LYD\"},{label:\"SZL\",value:\"SZL\"},{label:\"LSL\",value:\"LSL\"},{label:\"MGA\",value:\"MGA\"},{label:\"MWK\",value:\"MWK\"},{label:\"MYR\",value:\"MYR\"},{label:\"MUR\",value:\"MUR\"},{label:\"MXN\",value:\"MXN\"},{label:\"MXV\",value:\"MXV\"},{label:\"MDL\",value:\"MDL\"},{label:\"MAD\",value:\"MAD\"},{label:\"MZN\",value:\"MZN\"},{label:\"BOV\",value:\"BOV\"},{label:\"NGN\",value:\"NGN\"},{label:\"ERN\",value:\"ERN\"},{label:\"NAD\",value:\"NAD\"},{label:\"NPR\",value:\"NPR\"},{label:\"ANG\",value:\"ANG\"},{label:\"ILS\",value:\"ILS\"},{label:\"TWD\",value:\"TWD\"},{label:\"NZD\",value:\"NZD\"},{label:\"BTN\",value:\"BTN\"},{label:\"KPW\",value:\"KPW\"},{label:\"NOK\",value:\"NOK\"},{label:\"MRO\",value:\"MRO\"},{label:\"TOP\",value:\"TOP\"},{label:\"PKR\",value:\"PKR\"},{label:\"MOP\",value:\"MOP\"},{label:\"CUC\",value:\"CUC\"},{label:\"UYU\",value:\"UYU\"},{label:\"PHP\",value:\"PHP\"},{label:\"GBP\",value:\"GBP\"},{label:\"BWP\",value:\"BWP\"},{label:\"QAR\",value:\"QAR\"},{label:\"GTQ\",value:\"GTQ\"},{label:\"ZAR\",value:\"ZAR\"},{label:\"OMR\",value:\"OMR\"},{label:\"KHR\",value:\"KHR\"},{label:\"RON\",value:\"RON\"},{label:\"MVR\",value:\"MVR\"},{label:\"IDR\",value:\"IDR\"},{label:\"RUB\",value:\"RUB\"},{label:\"RWF\",value:\"RWF\"},{label:\"SHP\",value:\"SHP\"},{label:\"SAR\",value:\"SAR\"},{label:\"RSD\",value:\"RSD\"},{label:\"SCR\",value:\"SCR\"},{label:\"SGD\",value:\"SGD\"},{label:\"PEN\",value:\"PEN\"},{label:\"SBD\",value:\"SBD\"},{label:\"KGS\",value:\"KGS\"},{label:\"SOS\",value:\"SOS\"},{label:\"TJS\",value:\"TJS\"},{label:\"SSP\",value:\"SSP\"},{label:\"LKR\",value:\"LKR\"},{label:\"SDG\",value:\"SDG\"},{label:\"SRD\",value:\"SRD\"},{label:\"SEK\",value:\"SEK\"},{label:\"CHF\",value:\"CHF\"},{label:\"SYP\",value:\"SYP\"},{label:\"BDT\",value:\"BDT\"},{label:\"WST\",value:\"WST\"},{label:\"TZS\",value:\"TZS\"},{label:\"KZT\",value:\"KZT\"},{label:\"TTD\",value:\"TTD\"},{label:\"MNT\",value:\"MNT\"},{label:\"TND\",value:\"TND\"},{label:\"TRY\",value:\"TRY\"},{label:\"TMT\",value:\"TMT\"},{label:\"AED\",value:\"AED\"},{label:\"UGX\",value:\"UGX\"},{label:\"CLF\",value:\"CLF\"},{label:\"COU\",value:\"COU\"},{label:\"UYI\",value:\"UYI\"},{label:\"USD\",value:\"USD\"},{label:\"USN\",value:\"USN\"},{label:\"UZS\",value:\"UZS\"},{label:\"CHE\",value:\"CHE\"},{label:\"CHW\",value:\"CHW\"},{label:\"KRW\",value:\"KRW\"},{label:\"YER\",value:\"YER\"},{label:\"CNY\",value:\"CNY\"},{label:\"JPY\",value:\"JPY\"},{label:\"ZMW\",value:\"ZMW\"},{label:\"ZWL\",value:\"ZWL\"},{label:\"PLN\",value:\"PLN\"}],modal:!0,appendToBody:!0,lockScroll:!0,destroyOnClose:!0,top:\"0\",paymentUrl:\"\"}),methods:{created(){},mounted(){this.refreshOrder()},onSubmit(){\"\"===this.requestData.bizContent.amount&&this.refreshOrder(!0),this.sign()},sign(){n.a.signV4WithRequest(this.apiHost,this.env+\"/v4/payment/prePay\",this.requestData,this.salt,e=>{console.log(\"result:\",e);let l=JSON.parse(e.responseBody.bizContent);if(console.log(\"bizContent:\",l),this.token=l.token,console.log(\"token:\",this.token),null==this.token)return this.$message.error(\"token 获取失败\"),void console.log(\"token 获取失败\");this.centerDialogVisible=!0,this.requestBody=e.requestBody,this.responseBody=e.responseBody,this.showHostedIframe()},e=>{this.$message.error(e.msg)})},refreshOrder(e){this.requestData.bizContent.merchantTransactionId=\"PCD\"+Date.now(),!0===e&&(this.requestData.bizContent.amount=Math.floor(1e4*Math.random()+1))},handleEnvChange(){console.log(\"handleEnvChange:\",this.env)},showHostedIframe(){if(\"\"===this.responseBody||!this.responseBody.hasOwnProperty(\"bizContent\"))return this.$message.error(\"获取paymentUrl失败\"),void console.log(\"hasOwnProperty-bizContent:\",this.responseBody.hasOwnProperty(\"bizContent\"));let e=JSON.parse(this.responseBody.bizContent);if(!e.hasOwnProperty(\"paymentUrl\"))return this.$message.error(\"获取paymentUrl失败\"),void console.log(\"hasOwnProperty-paymentUrl:\",e.hasOwnProperty(\"paymentUrl\"));\"\"!==e.paymentUrl?(this.paymentUrl=e.paymentUrl,console.log(\"this.paymentUrl\",this.paymentUrl)):this.$message.error(\"获取paymentUrl失败\")}}},r=(a(603),a(604),a(12)),s=Object(r.a)(o,(function(){var e=this,l=e._self._c;return l(\"div\",{attrs:{id:\"container\"}},[l(\"div\",{staticClass:\"form\"},[l(\"el-form\",{attrs:{inline:!1,model:e.requestData,\"label-position\":\"left\",\"label-width\":\"80px\",\"label-suffix\":\":\"}},[l(\"el-form-item\",{attrs:{label:\"accId\"}},[l(\"el-input\",{model:{value:e.requestData.accId,callback:function(l){e.$set(e.requestData,\"accId\",l)},expression:\"requestData.accId\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"clientId\"}},[l(\"el-input\",{model:{value:e.requestData.clientId,callback:function(l){e.$set(e.requestData,\"clientId\",l)},expression:\"requestData.clientId\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"salt\"}},[l(\"el-input\",{model:{value:e.salt,callback:function(l){e.salt=l},expression:\"salt\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"金额\"}},[l(\"el-input\",{model:{value:e.requestData.bizContent.amount,callback:function(l){e.$set(e.requestData.bizContent,\"amount\",l)},expression:\"requestData.bizContent.amount\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"支付币种\"}},[l(\"el-select\",{attrs:{placeholder:\"currency\",filterable:\"\"},model:{value:e.requestData.bizContent.currency,callback:function(l){e.$set(e.requestData.bizContent,\"currency\",l)},expression:\"requestData.bizContent.currency\"}},e._l(e.currencies,(function(e){return l(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"ENV\"}},[l(\"el-select\",{attrs:{placeholder:\"environment\",filterable:\"\"},on:{change:e.handleEnvChange},model:{value:e.env,callback:function(l){e.env=l},expression:\"env\"}},e._l(e.environments,(function(e){return l(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(\" \"),l(\"el-tabs\",{attrs:{type:\"border-card\"}},[l(\"el-tab-pane\",{attrs:{label:\"请求参数设置\"}},[l(\"div\",[l(\"json-editor\",{staticStyle:{width:\"100%\",height:\"400px\"},attrs:{mode:\"code\",lang:\"zh\"},model:{value:e.requestData,callback:function(l){e.requestData=l},expression:\"requestData\"}})],1)])],1)],1),e._v(\" \"),l(\"br\"),e._v(\" \"),l(\"br\"),e._v(\" \"),l(\"div\",[e.requestBody?l(\"el-tabs\",{attrs:{type:\"border-card\"}},[l(\"el-tab-pane\",{attrs:{label:\"请求参数\"}},[e.requestBody?l(\"div\",{staticStyle:{\"margin-top\":\"50px\",\"font-size\":\"large\"}},[l(\"el-card\",{staticClass:\"box-card\",staticStyle:{\"margin-top\":\"20px\"}},[e.dynamicComponent?l(e.dynamicComponent,{tag:\"component\",attrs:{mode:\"code\",lang:\"zh\",expandedOnStart:!0},model:{value:e.requestBody,callback:function(l){e.requestBody=l},expression:\"requestBody\"}}):e._e()],1)],1):e._e()]),e._v(\" \"),l(\"el-tab-pane\",{attrs:{label:\"响应参数\"}},[e.responseBody?l(\"div\",{staticStyle:{\"margin-top\":\"50px\",\"font-size\":\"large\"}},[l(\"el-card\",{staticClass:\"box-card\",staticStyle:{\"margin-top\":\"20px\"}},[e.dynamicComponent?l(e.dynamicComponent,{tag:\"component\",attrs:{mode:\"code\",lang:\"zh\",expandedOnStart:!0},model:{value:e.responseBody,callback:function(l){e.responseBody=l},expression:\"responseBody\"}}):e._e()],1)],1):e._e()])],1):e._e()],1),e._v(\" \"),l(\"br\"),e._v(\" \"),l(\"br\"),e._v(\" \"),l(\"div\",{staticStyle:{display:\"flex\",\"justify-content\":\"flex-end\"}},[l(\"el-tooltip\",{attrs:{content:\"点击之后会请求API:/v4/payment/prePay\",placement:\"top\"}},[l(\"el-button\",{attrs:{type:\"primary\",loading:e.isLoading},on:{click:e.onSubmit}},[e._v(\"立即创建\")])],1),e._v(\" \"),this.paymentUrl?l(\"el-tooltip\",{attrs:{content:\"点击之后跳转到收银台\",placement:\"top\"}},[l(\"a\",{staticStyle:{display:\"inline-block\"},attrs:{href:this.paymentUrl,target:\"_parent\"}},[l(\"el-button\",{attrs:{type:\"primary\",loading:e.isLoading},on:{click:e.onSubmit}},[e._v(\"前往收银台 \")])],1)]):e._e(),e._v(\" \"),l(\"el-tooltip\",{attrs:{content:\"点击之后刷新订单数据，可以重新请求\",placement:\"top\"}},[l(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(l){return e.refreshOrder(!0)}}},[e._v(\"刷新订单\")])],1)],1)],1),e._v(\" \"),l(\"div\",{staticClass:\"popWindowContainer\",attrs:{id:\"popWindowContainer\"}})])}),[],!1,null,\"1fd76344\",null);l.default=s.exports}}]);","extractedComments":[]}