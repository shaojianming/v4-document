{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[181],{780:function(t,_,v){\"use strict\";v.r(_);var a=v(12),e=Object(a.a)({},(function(){var t=this,_=t._self._c;return _(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[_(\"h2\",{attrs:{id:\"异步通知概述\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#异步通知概述\"}},[t._v(\"#\")]),t._v(\" 异步通知概述\")]),t._v(\" \"),_(\"ul\",[_(\"li\",[t._v(\"首先，商户侧配置异步回调通知\"),_(\"code\",[t._v(\"notificationUrl\")]),t._v(\"地址。\")]),t._v(\" \"),_(\"li\",[t._v(\"每当，交易相关事件发生时（如交易成功），PingPongCheckOut 通知服务将会创建一个JSON对象，其中包含事件相关的数据等信息。\")]),t._v(\" \"),_(\"li\",[t._v(\"然后，PingPongCheckOut 通知服务通过 HTTP POST 请求将JSON对象发送到开发者配置的回调通知\"),_(\"code\",[t._v(\"notificationUrl\")]),t._v(\"中。\\n商户侧在收到回调通知后，可根据异步通知报文做下一步的业务处理。\")])]),t._v(\" \"),_(\"p\",[t._v(\"其流程描述如下：\\n\")]),_(\"div\",{staticStyle:{width:\"100%\"}},[_(\"img\",{staticStyle:{width:\"700px\",height:\"481px\"},attrs:{src:t.$withBase(\"/notify.png\")}})]),_(\"p\"),t._v(\" \"),_(\"h2\",{attrs:{id:\"接收异步通知\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#接收异步通知\"}},[t._v(\"#\")]),t._v(\" 接收异步通知\")]),t._v(\" \"),_(\"h3\",{attrs:{id:\"准备一个支持-http-post-的web服务\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#准备一个支持-http-post-的web服务\"}},[t._v(\"#\")]),t._v(\" 准备一个支持 HTTP POST 的web服务\")]),t._v(\" \"),_(\"p\",[t._v(\"PingPongCheckOut 通知服务将以 HTTP POST 方式推送 JSON 格式的数据，因此开发者所提供的 Web 服务需要能够接收并解析来自HTTP POST 请求的 JSON 数据并能够返回相应 HTTP 状态码。\")]),t._v(\" \"),_(\"h3\",{attrs:{id:\"设置回调通知地址\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#设置回调通知地址\"}},[t._v(\"#\")]),t._v(\" 设置回调通知地址\")]),t._v(\" \"),_(\"p\",[t._v(\"开发者可以通过各接口入参中的 \"),_(\"code\",[t._v(\"notificationUrl\")]),t._v(\" 参数配置回调通知Url地址。\")]),t._v(\" \"),_(\"blockquote\",[_(\"p\",[t._v(\"异步通知受双方网络连接状态影响，请确保通知地址公网可访问\")])]),t._v(\" \"),_(\"h3\",{attrs:{id:\"接收并响应\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#接收并响应\"}},[t._v(\"#\")]),t._v(\" 接收并响应\")]),t._v(\" \"),_(\"p\",[t._v(\"对于商户交易通知响应，遵循以下约定：\")]),t._v(\" \"),_(\"table\",[_(\"thead\",[_(\"tr\",[_(\"th\",[t._v(\"接收结果\")]),t._v(\" \"),_(\"th\",[t._v(\"HTTP Code 约定\")]),t._v(\" \"),_(\"th\",[t._v(\"应答报文格式约定\")])])]),t._v(\" \"),_(\"tbody\",[_(\"tr\",[_(\"td\",[t._v(\"接收成功\")]),t._v(\" \"),_(\"td\",[t._v(\"200 <= \"),_(\"code\",[t._v(\"httpcode\")]),t._v(\" < 300，比如：200、201、204\")]),t._v(\" \"),_(\"td\",[t._v(\"无需返回应答报文\")])]),t._v(\" \"),_(\"tr\",[_(\"td\",[t._v(\"接收失败\")]),t._v(\" \"),_(\"td\",[_(\"ul\",[_(\"li\",[_(\"code\",[t._v(\"httpcode\")]),t._v(\" > 300 或 \"),_(\"code\",[t._v(\"httpcode\")]),t._v(\" < 200\")]),_(\"li\",[t._v(\" 200 <= \"),_(\"code\",[t._v(\"httpcode\")]),t._v(\" < 300，比如：200、201、204\")])])]),t._v(\" \"),_(\"td\",[_(\"ul\",[_(\"li\",[t._v(\" 报文体任意\")]),_(\"li\",[t._v(\" 需返回应答报文「FAIL」\")])])])])])]),t._v(\" \"),_(\"blockquote\",[_(\"p\",[t._v(\"重试机制：接收失败的情况下会触发重试机制，PingPongCheckout 会在随后的一段时间内，以递增的时间间隔重发，间隔为 \"),_(\"code\",[t._v(\"5s/5s/3m/10m/20m/30m/30m/30m/60m/3h/3h/3h\")]),t._v(\"（若中间重试通知成功，则中断不再继续重试）。\")])]),t._v(\" \"),_(\"br\"),t._v(\" \"),_(\"div\",[_(\"Common-Warring\",[_(\"p\",[t._v(\"1. 商户不能仅仅依赖于异步通知，如果⻓时间未收到交易结果，商户应该主动向 PingPongCheckout 发起交易查询，查询对应的交易结果。\")]),t._v(\" \"),_(\"p\",[t._v(\"2. 请不要在`notificationUrl`后面携带query类型的参数，以免丢失，如果一定要携带，请使用pathInfo的URL模式。\")]),t._v(\" \"),_(\"p\",[t._v(\"3. 异步通知代码处理逻辑不能做登录态校验。\")])])],1),t._v(\" \"),_(\"br\"),t._v(\" \"),_(\"h2\",{attrs:{id:\"pingpongcheckout回调通知服务器信息\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#pingpongcheckout回调通知服务器信息\"}},[t._v(\"#\")]),t._v(\" PingPongCheckout回调通知服务器信息\")]),t._v(\" \"),_(\"p\",[t._v(\"如果商户侧需要防火墙配置后才允许 PingPongCheckout 消息通知服务推送数据，请根据下方信息进行防火墙设置，将IP加入到白名单：\")]),t._v(\" \"),_(\"table\",[_(\"thead\",[_(\"tr\",[_(\"th\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"生产环境\")]),t._v(\" \"),_(\"th\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"沙箱环境\")])])]),t._v(\" \"),_(\"tbody\",[_(\"tr\",[_(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"3.125.243.2\")]),t._v(\" \"),_(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"52.76.198.228\")])]),t._v(\" \"),_(\"tr\",[_(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"3.126.196.22\")]),t._v(\" \"),_(\"td\",{staticStyle:{\"text-align\":\"left\"}})]),t._v(\" \"),_(\"tr\",[_(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"18.195.199.34\")]),t._v(\" \"),_(\"td\",{staticStyle:{\"text-align\":\"left\"}})])])]),t._v(\" \"),_(\"h2\",{attrs:{id:\"通知报文\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#通知报文\"}},[t._v(\"#\")]),t._v(\" 通知报文\")]),t._v(\" \"),_(\"p\",[_(\"a\",{attrs:{href:\"/pages/5121a4/\",target:\"_blank\"}},[t._v(\"交易异步通知\")]),t._v(\" \"),_(\"br\"),t._v(\" \"),_(\"a\",{attrs:{href:\"/pages/71c886/\",target:\"_blank\"}},[t._v(\"退款异步通知\")]),t._v(\" \"),_(\"br\"),t._v(\" \"),_(\"a\",{attrs:{href:\"/pages/ad0c0f/\",target:\"_blank\"}},[t._v(\"预授权确认通知\")]),t._v(\" \"),_(\"br\"),t._v(\" \"),_(\"a\",{attrs:{href:\"/pages/f687d3/\",target:\"_blank\"}},[t._v(\"预授权撤销通知\")])])])}),[],!1,null,null,null);_.default=e.exports}}]);","extractedComments":[]}