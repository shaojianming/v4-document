{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{338:function(e,l,a){const t=a(372).create({timeout:1e5});t.interceptors.request.use(e=>e,e=>Promise.reject(e)),t.interceptors.response.use(e=>{const l=e.data,{code:a,total:t,data:o}=l;l.msg||l.message||l.description;return console.log(l),l},e=>Promise.reject(e)),e.exports=t},346:function(e,l,a){a(36),a(361),a(362),a(363);const t=a(398),o=a(338),s={sign:(e,l)=>{let a=[\"requestId\",\"accId\",\"clientId\",\"merchantTransactionId\",\"transactionId\",\"amount\",\"cardNum\",\"currency\",\"signType\"],o=[],s=[];for(let l in e)a.includes(l)&&o.push(l);o=o.sort(),o.forEach(l=>{s[l]=e[l]}),console.log(\"current request data:\",e),console.log(\"Key value pairs within the signature range：\",s);let n=new URLSearchParams;o.forEach((function(e,l,a){n.append(e,s[e])}));let i=n.toString();i=l+i,console.log(\"signContent:\",i);let r=t(i);return r=r.toString(),r=r.toUpperCase(),console.log(\"sign:\",r),e.sign=r,r},signV4WithRequest:(e,l,a,t,s,n)=>{o.post(e+\"/api/v4/dealSignRequest\",{salt:t,paymentUrl:l,requestBody:a}).then(e=>{200===e.code?s(e.result):n(e)})},deepCopy:e=>JSON.parse(JSON.stringify(e))};e.exports=s},399:function(e,l){},480:function(e,l,a){},481:function(e,l,a){},599:function(e,l,a){\"use strict\";a(480)},600:function(e,l,a){\"use strict\";a(481)},710:function(e,l,a){\"use strict\";a.r(l);var t=a(346),o=a.n(t),s={globalObject:\"this\",name:\"SDK.vue\",created(){this.refreshOrder()},components:{JsonEditor:a(435).default},mounted(){},data:()=>({color1:\"#409EFF\",color2:\"#409EFF\",activeTabLevel2:\"主题选择\",radio1:\"默认\",requestBody:\"\",responseBody:\"\",apiHost:\"https://acquirer-docs-api.pingpongx.com\",env:\"https://sandbox-acquirer-payment.pingpongx.com\",dynamicComponent:null,drawer:!1,activeName:\"first\",salt:\"F78BC96A55548B2319EE68E0\",token:\"\",dialogWith:\"30%\",responseData:\"\",isDisabled:!0,isLoading:!1,htmlContent:\"\",requestDataFormat:\"\",requestData:{accId:\"2018092714313010016291\",clientId:\"2018092714313010016\",version:\"1.0\",bizContent:{captureDelayHours:0,language:\"en\",amount:\"\",billingAddress:{city:\"Birmingham\",country:\"US\",firstName:\"James\",lastName:\"LeBron\",phone:\"18301770495\",postcode:\"35222\",state:\"AL\",street:\"1986 Broad Street\"},currency:\"USD\",customer:{customerId:\"20191201001\",email:\"\",firstName:\"James\",identificationId:\"\",identificationType:\"ID\",lastName:\"LeBron\",phone:\"18301770495\"},goods:[{description:\"short legs\",imgUrl:\"http://pic.bizhi360.com/bpic/30/5230.jpg\",name:\"corgi\",number:\"1\",sku:\"20230524001\",unitPrice:\"11.3\",virtualProduct:\"N\"},{description:\"stupid nerd\",imgUrl:\"http://d.paper.i4.cn/max/2016/12/08/11/1481166973148_375716.jpg\",name:\"husky\",number:\"1\",sku:\"20230524002\",unitPrice:\"22.5\",virtualProduct:\"N\"}],merchantTransactionId:\"\",merchantUserId:\"12604896051315\",notificationUrl:\"https://test-acquirer-payment.pingpongx.com/qa/notify\",payCancelUrl:\"https://www.example.com\",payResultUrl:\"https://test-acquirerpay.pingpongx.com/qa/result.html\",shippingAddress:{city:\"Miami\",country:\"US\",firstName:\"Jamesbb\",lastName:\"LeBronbb\",phone:\"3055787342\",postcode:\"33131\",state:\"FL\",street:\"701 Brickell Avenue, Suite 2700\"}},sign:\"\",signType:\"SHA256\"},sdkConfigs:{mode:\"sandbox\",lang:\"zh\",root:\"#payment-wrap\",manul:!1,showPrice:!0,bill:!1,located:!1,menu:!0,base:{width:\"100%\",height:\"800px\",backgroundColor:\"#fff\",priceBgColor:\"#fff\",priceFontColor:\"#1fa0e8\",priceFontSize:\"32px\",priceMB:\"10px\",showHeaderLabel:!1,headerMB:\"24px\",headerSize:\"20px\",headerColor:\"rgba(0, 0, 0, 0.85)\",headerfontWeight:700,payMethodsWidth:\"240px\",payMethodsHeight:\"48px\",payMethodsColor:\"rgba(0, 0, 0, 0.85)\",payMethodsActiveColor:\"#1fa0e8\",payMethodsFontsize:\"14px\",payMethodsActiveBorderColor:\"#1fa0e8\",payMethodsActiveBorderShadow:\"0 2px 8px 0 rgb(31 160 232 / 20%)\",showIcons:!0,showHeaderAmount:!0,formItemMargin:\"16px\",formItemBorderColor:\"rgba(0, 0, 0, 0.08)\",formItemFocusColor:\"#1fa0e8\",btnSize:\"100%\",btnColor:\"#fff\",btnFontSize:\"14px\",btnMarginTop:\"10px\",btnMarginBottom:\"24px\",btnBackgroundColor:\"#1fa0e8\",btnBorderRadius:\"8px\",btnBorderColor:\"#1fa0e8\"}},environments:[{label:\"sandbox\",value:\"https://sandbox-acquirer-payment.pingpongx.com\"},{label:\"production\",value:\"https://acquirer-payment.pingpongx.com\"},{label:\"test\",value:\"https://test-acquirer-payment.pingpongx.com\"}],currencies:[{label:\"AFN\",value:\"AFN\"},{label:\"DZD\",value:\"DZD\"},{label:\"ARS\",value:\"ARS\"},{label:\"AMD\",value:\"AMD\"},{label:\"AWG\",value:\"AWG\"},{label:\"AUD\",value:\"AUD\"},{label:\"BSD\",value:\"BSD\"},{label:\"BHD\",value:\"BHD\"},{label:\"THB\",value:\"THB\"},{label:\"PAB\",value:\"PAB\"},{label:\"BBD\",value:\"BBD\"},{label:\"BYN\",value:\"BYN\"},{label:\"BZD\",value:\"BZD\"},{label:\"BMD\",value:\"BMD\"},{label:\"VEF\",value:\"VEF\"},{label:\"BOB\",value:\"BOB\"},{label:\"BRL\",value:\"BRL\"},{label:\"BND\",value:\"BND\"},{label:\"BGN\",value:\"BGN\"},{label:\"BIF\",value:\"BIF\"},{label:\"CVE\",value:\"CVE\"},{label:\"CAD\",value:\"CAD\"},{label:\"KYD\",value:\"KYD\"},{label:\"XOF\",value:\"XOF\"},{label:\"XAF\",value:\"XAF\"},{label:\"XPF\",value:\"XPF\"},{label:\"CLP\",value:\"CLP\"},{label:\"COP\",value:\"COP\"},{label:\"KMF\",value:\"KMF\"},{label:\"CDF\",value:\"CDF\"},{label:\"BAM\",value:\"BAM\"},{label:\"NIO\",value:\"NIO\"},{label:\"CRC\",value:\"CRC\"},{label:\"CUP\",value:\"CUP\"},{label:\"CZK\",value:\"CZK\"},{label:\"GMD\",value:\"GMD\"},{label:\"DKK\",value:\"DKK\"},{label:\"MKD\",value:\"MKD\"},{label:\"DJF\",value:\"DJF\"},{label:\"STD\",value:\"STD\"},{label:\"DOP\",value:\"DOP\"},{label:\"VND\",value:\"VND\"},{label:\"XCD\",value:\"XCD\"},{label:\"EGP\",value:\"EGP\"},{label:\"SVC\",value:\"SVC\"},{label:\"ETB\",value:\"ETB\"},{label:\"EUR\",value:\"EUR\"},{label:\"FKP\",value:\"FKP\"},{label:\"FJD\",value:\"FJD\"},{label:\"HUF\",value:\"HUF\"},{label:\"GHS\",value:\"GHS\"},{label:\"GIP\",value:\"GIP\"},{label:\"HTG\",value:\"HTG\"},{label:\"PYG\",value:\"PYG\"},{label:\"GNF\",value:\"GNF\"},{label:\"GYD\",value:\"GYD\"},{label:\"HKD\",value:\"HKD\"},{label:\"UAH\",value:\"UAH\"},{label:\"ISK\",value:\"ISK\"},{label:\"INR\",value:\"INR\"},{label:\"IRR\",value:\"IRR\"},{label:\"IQD\",value:\"IQD\"},{label:\"JMD\",value:\"JMD\"},{label:\"JOD\",value:\"JOD\"},{label:\"KES\",value:\"KES\"},{label:\"PGK\",value:\"PGK\"},{label:\"LAK\",value:\"LAK\"},{label:\"HRK\",value:\"HRK\"},{label:\"KWD\",value:\"KWD\"},{label:\"AOA\",value:\"AOA\"},{label:\"MMK\",value:\"MMK\"},{label:\"GEL\",value:\"GEL\"},{label:\"LBP\",value:\"LBP\"},{label:\"ALL\",value:\"ALL\"},{label:\"HNL\",value:\"HNL\"},{label:\"SLL\",value:\"SLL\"},{label:\"LRD\",value:\"LRD\"},{label:\"LYD\",value:\"LYD\"},{label:\"SZL\",value:\"SZL\"},{label:\"LSL\",value:\"LSL\"},{label:\"MGA\",value:\"MGA\"},{label:\"MWK\",value:\"MWK\"},{label:\"MYR\",value:\"MYR\"},{label:\"MUR\",value:\"MUR\"},{label:\"MXN\",value:\"MXN\"},{label:\"MXV\",value:\"MXV\"},{label:\"MDL\",value:\"MDL\"},{label:\"MAD\",value:\"MAD\"},{label:\"MZN\",value:\"MZN\"},{label:\"BOV\",value:\"BOV\"},{label:\"NGN\",value:\"NGN\"},{label:\"ERN\",value:\"ERN\"},{label:\"NAD\",value:\"NAD\"},{label:\"NPR\",value:\"NPR\"},{label:\"ANG\",value:\"ANG\"},{label:\"ILS\",value:\"ILS\"},{label:\"TWD\",value:\"TWD\"},{label:\"NZD\",value:\"NZD\"},{label:\"BTN\",value:\"BTN\"},{label:\"KPW\",value:\"KPW\"},{label:\"NOK\",value:\"NOK\"},{label:\"MRO\",value:\"MRO\"},{label:\"TOP\",value:\"TOP\"},{label:\"PKR\",value:\"PKR\"},{label:\"MOP\",value:\"MOP\"},{label:\"CUC\",value:\"CUC\"},{label:\"UYU\",value:\"UYU\"},{label:\"PHP\",value:\"PHP\"},{label:\"GBP\",value:\"GBP\"},{label:\"BWP\",value:\"BWP\"},{label:\"QAR\",value:\"QAR\"},{label:\"GTQ\",value:\"GTQ\"},{label:\"ZAR\",value:\"ZAR\"},{label:\"OMR\",value:\"OMR\"},{label:\"KHR\",value:\"KHR\"},{label:\"RON\",value:\"RON\"},{label:\"MVR\",value:\"MVR\"},{label:\"IDR\",value:\"IDR\"},{label:\"RUB\",value:\"RUB\"},{label:\"RWF\",value:\"RWF\"},{label:\"SHP\",value:\"SHP\"},{label:\"SAR\",value:\"SAR\"},{label:\"RSD\",value:\"RSD\"},{label:\"SCR\",value:\"SCR\"},{label:\"SGD\",value:\"SGD\"},{label:\"PEN\",value:\"PEN\"},{label:\"SBD\",value:\"SBD\"},{label:\"KGS\",value:\"KGS\"},{label:\"SOS\",value:\"SOS\"},{label:\"TJS\",value:\"TJS\"},{label:\"SSP\",value:\"SSP\"},{label:\"LKR\",value:\"LKR\"},{label:\"SDG\",value:\"SDG\"},{label:\"SRD\",value:\"SRD\"},{label:\"SEK\",value:\"SEK\"},{label:\"CHF\",value:\"CHF\"},{label:\"SYP\",value:\"SYP\"},{label:\"BDT\",value:\"BDT\"},{label:\"WST\",value:\"WST\"},{label:\"TZS\",value:\"TZS\"},{label:\"KZT\",value:\"KZT\"},{label:\"TTD\",value:\"TTD\"},{label:\"MNT\",value:\"MNT\"},{label:\"TND\",value:\"TND\"},{label:\"TRY\",value:\"TRY\"},{label:\"TMT\",value:\"TMT\"},{label:\"AED\",value:\"AED\"},{label:\"UGX\",value:\"UGX\"},{label:\"CLF\",value:\"CLF\"},{label:\"COU\",value:\"COU\"},{label:\"UYI\",value:\"UYI\"},{label:\"USD\",value:\"USD\"},{label:\"USN\",value:\"USN\"},{label:\"UZS\",value:\"UZS\"},{label:\"CHE\",value:\"CHE\"},{label:\"CHW\",value:\"CHW\"},{label:\"KRW\",value:\"KRW\"},{label:\"YER\",value:\"YER\"},{label:\"CNY\",value:\"CNY\"},{label:\"JPY\",value:\"JPY\"},{label:\"ZMW\",value:\"ZMW\"},{label:\"ZWL\",value:\"ZWL\"},{label:\"PLN\",value:\"PLN\"}],modal:!0,appendToBody:!0,lockScroll:!0,destroyOnClose:!0,top:\"0\"}),methods:{created(){},mounted(){this.refreshOrder(),this.sdkConfigs.mode=this.findModeWithEnv()},onSubmit(){\"\"===this.requestData.bizContent.amount&&this.refreshOrder(!0),this.sign()},sign(){o.a.signV4WithRequest(this.apiHost,this.env+\"/v4/payment/prePay\",this.requestData,this.salt,e=>{console.log(\"result:\",e);let l=JSON.parse(e.responseBody.bizContent);if(console.log(\"bizContent:\",l),this.token=l.token,console.log(\"token:\",this.token),null==this.token)return this.$message.error(\"token 获取失败\"),void console.log(\"token 获取失败\");this.requestBody=e.requestBody,this.responseBody=e.responseBody},e=>{this.$message.error(e.msg)})},refreshOrder(e){this.requestData.bizContent.merchantTransactionId=\"PCD\"+Date.now(),!0===e&&(this.requestData.bizContent.amount=Math.floor(1e4*Math.random()+1)),console.log(\"refreshOrder success\"),this.requestBody=\"\"},initJSSDK(e){console.log(\"sdkConfigs:\",this.sdkConfigs);let l=new ppPay(this.sdkConfigs);console.log(\"createPayment-token:\",e),l.createPayment(e)},handleOpened(){this.htmlContent=' <div id=\"payment-wrap\" style=\"width: 100%;overflow:hidden;min-height: 600px\"></div>',setTimeout(()=>{this.initJSSDK(this.token)})},handleClosed(){},handleEnvChange(){this.sdkConfigs.mode=this.findModeWithEnv(),console.log(\"handleEnvChange:\",this.env,\"mode:\",this.sdkConfigs.mode)},findModeWithEnv(){let e=this.environments.find(e=>e.value===this.env).label;return console.log(\"selectedOptionLabel:\",e),e},handleRadioChange(e){\"默认\"==e?(this.sdkConfigs.base.priceFontColor=\"#1fa0e8\",this.sdkConfigs.base.payMethodsActiveColor=\"#1fa0e8\",this.sdkConfigs.base.payMethodsActiveBorderColor=\"#1fa0e8\",this.sdkConfigs.base.formItemFocusColor=\"#1fa0e8\",this.sdkConfigs.base.btnBackgroundColor=\"#1fa0e8\",this.sdkConfigs.base.btnBorderColor=\"#1fa0e8\",this.$delete(this.sdkConfigs.base,\"themeColor\"),this.$delete(this.sdkConfigs.base,\"themeLightColor\")):\"绿幕\"==e?(this.changeTheme(\"green\"),this.changeThemeLightColor(\"rgba(0, 128, 0, 0.1)\")):\"琥珀\"==e&&(this.changeTheme(\"rgb(253,160,10)\"),this.changeThemeLightColor(\"rgb(254,244,222)\"))},handlePickerChange1(){this.changeTheme(this.color1),this.changeThemeLightColor(this.color2)},handlePickerChange2(){this.changeTheme(this.color1),this.changeThemeLightColor(this.color2)},changeTheme(e){this.$delete(this.sdkConfigs.base,\"priceFontColor\"),this.$delete(this.sdkConfigs.base,\"payMethodsActiveColor\"),this.$delete(this.sdkConfigs.base,\"payMethodsActiveBorderColor\"),this.$delete(this.sdkConfigs.base,\"formItemFocusColor\"),this.$delete(this.sdkConfigs.base,\"btnBackgroundColor\"),this.$delete(this.sdkConfigs.base,\"btnBorderColor\"),this.$set(this.sdkConfigs.base,\"themeColor\",e)},changeThemeLightColor(e){this.$set(this.sdkConfigs.base,\"themeLightColor\",e)},handleTabClick1(e,l){\"自定义主题颜色\"==e.name?(console.log(this.color1,this.color2),this.changeTheme(this.color1),this.changeThemeLightColor(this.color2)):\"主题选择\"==e.name&&(console.log(this.radio1),this.handleRadioChange(this.radio1))}}},n=(a(599),a(600),a(12)),i=Object(n.a)(s,(function(){var e=this,l=e._self._c;return l(\"div\",{attrs:{id:\"container\"}},[l(\"script\",{attrs:{src:\"https://pay-cdn.pingpongx.com/production-fra/static/sdk-v3/ppPay.min.js\"}}),e._v(\" \"),l(\"div\",{staticClass:\"form\"},[l(\"el-form\",{attrs:{inline:!1,model:e.requestData,\"label-position\":\"left\",\"label-width\":\"80px\",\"label-suffix\":\":\"}},[l(\"el-form-item\",{attrs:{label:\"accId\"}},[l(\"el-input\",{model:{value:e.requestData.accId,callback:function(l){e.$set(e.requestData,\"accId\",l)},expression:\"requestData.accId\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"clientId\"}},[l(\"el-input\",{model:{value:e.requestData.clientId,callback:function(l){e.$set(e.requestData,\"clientId\",l)},expression:\"requestData.clientId\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"salt\"}},[l(\"el-input\",{model:{value:e.salt,callback:function(l){e.salt=l},expression:\"salt\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"金额\"}},[l(\"el-input\",{model:{value:e.requestData.bizContent.amount,callback:function(l){e.$set(e.requestData.bizContent,\"amount\",l)},expression:\"requestData.bizContent.amount\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"支付币种\"}},[l(\"el-select\",{attrs:{placeholder:\"currency\",filterable:\"\"},model:{value:e.requestData.bizContent.currency,callback:function(l){e.$set(e.requestData.bizContent,\"currency\",l)},expression:\"requestData.bizContent.currency\"}},e._l(e.currencies,(function(e){return l(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"ENV\"}},[l(\"el-select\",{attrs:{placeholder:\"environment\",filterable:\"\"},on:{change:e.handleEnvChange},model:{value:e.env,callback:function(l){e.env=l},expression:\"env\"}},e._l(e.environments,(function(e){return l(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(\" \"),l(\"div\",[l(\"json-editor\",{staticStyle:{width:\"100%\",height:\"400px\"},attrs:{mode:\"code\",lang:\"zh\"},model:{value:e.requestData,callback:function(l){e.requestData=l},expression:\"requestData\"}})],1)],1),e._v(\" \"),l(\"br\"),e._v(\" \"),l(\"br\"),e._v(\" \"),l(\"div\",[e.requestBody?l(\"el-tabs\",{attrs:{type:\"border-card\"}},[l(\"el-tab-pane\",{attrs:{label:\"请求参数\"}},[e.requestBody?l(\"div\",{staticStyle:{\"margin-top\":\"50px\",\"font-size\":\"large\"}},[l(\"el-card\",{staticClass:\"box-card\",staticStyle:{\"margin-top\":\"20px\"}},[l(\"p\",{staticStyle:{width:\"100%\"},attrs:{value:e.requestBody}})])],1):e._e()]),e._v(\" \"),l(\"el-tab-pane\",{attrs:{label:\"响应参数\"}},[e.responseBody?l(\"div\",{staticStyle:{\"margin-top\":\"50px\",\"font-size\":\"large\"}},[l(\"el-card\",{staticClass:\"box-card\",staticStyle:{\"margin-top\":\"20px\"}},[l(\"p\",{staticStyle:{width:\"100%\"},attrs:{value:e.responseBody}})])],1):e._e()])],1):e._e()],1),e._v(\" \"),l(\"br\"),e._v(\" \"),l(\"br\"),e._v(\" \"),l(\"div\",{staticStyle:{display:\"flex\",\"justify-content\":\"flex-end\"}},[l(\"el-tooltip\",{attrs:{content:\"点击之后会请求API:/v4/payment/prePay,打开控制台可以查看签名过程信息\",placement:\"top\"}},[l(\"el-button\",{attrs:{type:\"primary\",loading:e.isLoading},on:{click:e.onSubmit}},[e._v(\"立即创建\")])],1),e._v(\" \"),l(\"el-tooltip\",{attrs:{content:\"点击之后刷新订单数据，可以重新请求\",placement:\"top\"}},[l(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(l){return e.refreshOrder(!0)}}},[e._v(\"刷新订单\")])],1)],1)],1)])}),[],!1,null,\"386e2250\",null);l.default=i.exports}}]);","extractedComments":[]}