{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[251],{836:function(t,e,a){\"use strict\";a.r(e);var v=a(12),l=Object(v.a)({},(function(){var t=this,e=t._self._c;return e(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[e(\"br\"),t._v(\" \"),e(\"div\",[e(\"Common-Warring\",[e(\"p\",[t._v('1. 若交易同步返回状态为\"PROCESSING\"，商户应等待 PingPongCheckout 异步结果再进行业务处理；\\n      ')]),e(\"p\",[t._v(\"2. 因此商户必须有机制保证在合适的时机查询到交易最终状态，或者接入异步通知。\")])])],1),t._v(\" \"),e(\"br\"),t._v(\" \"),e(\"h2\",{attrs:{id:\"交易幂等说明\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#交易幂等说明\"}},[t._v(\"#\")]),t._v(\" 交易幂等说明\")]),t._v(\" \"),e(\"ul\",[e(\"li\",[t._v(\"对于同一笔支付订单，在未支付成功前可以允许继续发起支付请求（一笔支付订单对应多笔支付请求）\")]),t._v(\" \"),e(\"li\",[t._v(\"如果商户不希望同一笔支付订单发生多次支付请求，那么支付接口中同一笔支付订单的requestId传一样的即可就只允许一次支付请求（仅限Non-Hosted模式）\")]),t._v(\" \"),e(\"li\",[t._v(\"Hosted模式允许发起多次支付请求，用户刷新了收银台页面requestId就会变更（认为用户是需要再次发起支付请求），不刷新的情况下requestId不会变（防止用户误操作重复提交）\")]),t._v(\" \"),e(\"li\",[t._v(\"因为根据requestId幂等，在订单未支付成功前，如果商户传不同的requestId（或收银台模式），同时发起支付请求，存在重复支付的可能，此时需要人工接入后台操作退款\\n\"),e(\"br\"),t._v(\" \"),e(\"br\")])]),t._v(\" \"),e(\"h2\",{attrs:{id:\"如何获取交易状态\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#如何获取交易状态\"}},[t._v(\"#\")]),t._v(\" 如何获取交易状态\")]),t._v(\" \"),e(\"p\",[t._v(\"在唤起收银台，点击支付无错误的情况下，就产生了待处理的交易。PingPongCheckout提供两种获取交易状态的方式：\")]),t._v(\" \"),e(\"p\",[e(\"a\",{attrs:{href:\"/pages/0fd268/\",target:\"_blank\"}},[t._v(\"交易查询\")]),t._v(\" \"),e(\"br\"),t._v(\" \"),e(\"a\",{attrs:{href:\"/pages/d0ddb3/\",target:\"_blank\"}},[t._v(\"异步通知\")])]),t._v(\" \"),e(\"h2\",{attrs:{id:\"交易状态的语义\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#交易状态的语义\"}},[t._v(\"#\")]),t._v(\" 交易状态的语义\")]),t._v(\" \"),e(\"p\",[t._v(\"PingPongCheckout API v4使用交易接口中的captureDelayHours参数进行区分业务场景,交易状态是交易流程和结果的描述,不同业务场景有不同的规则。\\n对于PingPongCheckout API v4 现有七种状态可以返回：\")]),t._v(\" \"),e(\"div\",{staticStyle:{display:\"flex\",\"justify-content\":\"space-between\"}},[e(\"div\",[e(\"el-tag\",{attrs:{type:\"\",effect:\"dark\"}},[t._v(\"INIT-初始态\")])],1),t._v(\" \"),e(\"br\"),t._v(\" \"),e(\"div\",[e(\"el-tag\",{attrs:{type:\"\",effect:\"dark\"}},[t._v(\"PROCESSING-进行中\")])],1),t._v(\" \"),e(\"br\"),t._v(\" \"),e(\"div\",[e(\"el-tag\",{attrs:{type:\"danger\",effect:\"dark\"}},[t._v(\"FAILED-失败\")])],1),t._v(\" \"),e(\"br\"),t._v(\" \"),e(\"div\",[e(\"el-tag\",{attrs:{type:\"danger\",effect:\"dark\"}},[t._v(\"CLOSED-订单关闭\")])],1),t._v(\" \"),e(\"br\"),t._v(\" \"),e(\"div\",[e(\"el-tag\",{attrs:{type:\"danger\",effect:\"dark\"}},[t._v(\"CANCEL-预授权取消\")])],1),t._v(\" \"),e(\"br\"),t._v(\" \"),e(\"div\",[e(\"el-tag\",{attrs:{type:\"success\",effect:\"dark\"}},[t._v(\"SUCCESS-成功\")])],1),t._v(\" \"),e(\"br\"),t._v(\" \"),e(\"div\",[e(\"el-tag\",{attrs:{type:\"success\",effect:\"dark\"}},[t._v(\"AUTH_SUCCESS-预授权成功\")])],1)]),t._v(\" \"),e(\"br\"),t._v(\" \"),e(\"br\"),t._v(\" \"),e(\"br\"),t._v(\" \"),e(\"br\"),t._v(\" \"),e(\"div\",{staticStyle:{display:\"flex\"}},[e(\"img\",{attrs:{src:t.$withBase(\"/captureDelayHours_x.svg\"),alt:\"AUTH\"}}),t._v(\" \"),e(\"p\",{staticStyle:{\"text-align\":\"center\",color:\"#8c939d\",\"font-size\":\"14px\"}},[t._v(\"交易状态流转图\")])]),t._v(\" \"),e(\"p\",[t._v(\"状态转移说明\")]),t._v(\" \"),e(\"ul\",[e(\"li\",[t._v(\"以下状态会发送异步通知：\\n\"),e(\"ul\",[e(\"li\",[e(\"code\",[t._v(\"SUCCESS\")])]),t._v(\" \"),e(\"li\",[e(\"code\",[t._v(\"FAILED\")])])])]),t._v(\" \"),e(\"li\",[t._v(\"交易状态不在上述状态列表的场景，下单API或查询接口都会同步响应\"),e(\"code\",[t._v(\"PROCESSING\")]),t._v(\"，商户应等待 PingPongCheckout 异步结果再进行业务处理。\")])]),t._v(\" \"),e(\"h3\",{attrs:{id:\"debit交易业务场景\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#debit交易业务场景\"}},[t._v(\"#\")]),t._v(\" DEBIT交易业务场景：\")]),t._v(\" \"),e(\"table\",[e(\"thead\",[e(\"tr\",[e(\"th\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"状态\")]),t._v(\" \"),e(\"th\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"描述\")]),t._v(\" \"),e(\"th\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"状态类型\")])])]),t._v(\" \"),e(\"tbody\",[e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"div\",[e(\"el-tag\",{attrs:{type:\"success\",effect:\"dark\"}},[t._v(\"SUCCESS\")])],1)]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"已成功支付，交易成功\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"终态\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"div\",[e(\"el-tag\",{attrs:{type:\"danger\",effect:\"dark\"}},[t._v(\"CLOSED\")])],1)]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"交易因超期/关单导致的结果\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"终态\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"div\",[e(\"el-tag\",{attrs:{type:\"danger\",effect:\"dark\"}},[t._v(\"FAILED\")])],1)]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"支付失败，用户可以重新支付\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"中间状态\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"div\",[e(\"el-tag\",{attrs:{type:\"\",effect:\"dark\"}},[t._v(\"PROCESSING\")])],1)]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"中间状态，商户应等待 PingPongCheckout 异步结果再进行业务处理。\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"中间状态\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"div\",[e(\"el-tag\",{attrs:{type:\"\",effect:\"dark\"}},[t._v(\"INIT\")])],1)]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"初始化订单\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"中间状态\")])])])]),t._v(\" \"),e(\"blockquote\",[e(\"p\",[t._v(\"一旦交易到达终态，除非因为失败发起重新支付,都不应该再次接受异步通知的更改。交易在中间态的时候，需要等待下一个异步通知到达本次支付的终态。\")])]),t._v(\" \"),e(\"h3\",{attrs:{id:\"auth交易业务场景\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#auth交易业务场景\"}},[t._v(\"#\")]),t._v(\" AUTH交易业务场景：\")]),t._v(\" \"),e(\"table\",[e(\"thead\",[e(\"tr\",[e(\"th\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"状态\")]),t._v(\" \"),e(\"th\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"描述\")])])]),t._v(\" \"),e(\"tbody\",[e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"div\",[e(\"el-tag\",{attrs:{type:\"success\",effect:\"dark\"}},[t._v(\"SUCCESS\")])],1)]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"最终CAPTURE成功\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"div\",[e(\"el-tag\",{attrs:{type:\"success\",effect:\"dark\"}},[t._v(\"AUTH_SUCCESS\")])],1)]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"AUTH操作成功，还需发起CAPTURE操作\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"div\",[e(\"el-tag\",{attrs:{type:\"danger\",effect:\"dark\"}},[t._v(\"CLOSED\")])],1)]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"交易因超期/关单导致的结果\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"div\",[e(\"el-tag\",{attrs:{type:\"danger\",effect:\"dark\"}},[t._v(\"FAILED\")])],1)]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"支付失败，用户可以重新支付\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"div\",[e(\"el-tag\",{attrs:{type:\"danger\",effect:\"dark\"}},[t._v(\"CANCEL\")])],1)]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"AUTH操作成功,调用VOID预授权撤销\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"div\",[e(\"el-tag\",{attrs:{type:\"\",effect:\"dark\"}},[t._v(\"PROCESSING\")])],1)]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"中间状态，不能发起CAPTURE操作，商户应等待 PingPongCheckout 异步结果再进行业务处理。\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"div\",[e(\"el-tag\",{attrs:{type:\"\",effect:\"dark\"}},[t._v(\"INIT\")])],1)]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"初始化订单\")])])])])])}),[],!1,null,null,null);e.default=l.exports}}]);","extractedComments":[]}